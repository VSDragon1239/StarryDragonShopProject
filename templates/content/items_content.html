<!-- app/templates/index.html -->
{% extends 'base/base_items_and_sidebar_and_filterbar_content.html' %}
{% load static %}

{% block add_css_items_content %}
    <link rel="stylesheet" href="{% static 'css/content/items_content.css' %}">
{% endblock %}

{% block items_content_block_1 %}
    {% for product in products %}
        <a href="{% url 'product' product.category.id product.id %}" class="product-item">
            <div class="image-placeholder">
                {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}">
                    {#                        <img src="{% static 'images/items/item_test.png' %}" alt="{{ product.name }}">#}
                {% else %}
                    <p>–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                {% endif %}
            </div>
            <div class="product-details">
                <div class="product-meta">
                    <h3 class="product-title">{{ product.name }}</h3>
                    <p class="product-price">–¶–µ–Ω–∞: {{ product.price }} ‚ÇΩ</p>
                </div>
                <div class="product-meta">
                    <span class="comments">üí¨ {{ product.reviews.count }}</span>
                    <span class="likes">üëç {{ product.rating|floatformat:1 }}</span>
                    <span class="seller">üë§ –ê–≤—Ç–æ—Ä</span>
                </div>
            </div>
        </a>
    {% endfor %}
{% endblock %}


{% block items_content_block_2 %}
    {% for i in list_test %}
        <a href="{% url 'test' %}" class="product-item">
            <div class="image-placeholder">
                <img src="{% static 'images/items/item_test.png' %}" alt="{{ product.name }}">
                {#                    <img src="" alt="–ù–µ–π–º">#}
            </div>
            <div class="product-details">
                <div class="product-meta">
                    <h3 class="product-title">–ù–∞–∑–≤–∞–Ω–∏–µ</h3>
                    <p class="product-price">–¶–µ–Ω–∞: 0 ‚ÇΩ</p>
                </div>
                <div class="product-meta">
                    <span class="comments">üí¨ 1</span>
                    <span class="likes">üëç 1</span>
                    <span class="seller">üë§ –ê–≤—Ç–æ—Ä</span>
                </div>
            </div>
        </a>
    {% endfor %}
{% endblock %}

{% block items_content_block_3 %}
    <div class="content-block-0">
        <!-- –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –ø—Ä–æ–¥—É–∫—Ç–µ -->
        {% if product %}
            <div class="product-form">
                <h2>{{ product.name }}</h2>
                <div class="product-image">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                    {% else %}
                        <p>–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                    {% endif %}
                </div>
                <div class="product-info">
                    <p>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ product.category.name }}</p>
                    <p>–¶–µ–Ω–∞: {{ product.price }} ‚ÇΩ</p>
                    <p>–û–ø–∏—Å–∞–Ω–∏–µ:</p>
                    <p>{{ product.descriptions }}</p>
                </div>
                <div class="product-download">
                    {% if product.model_files and product.price == 0.0 %}
                        <a href="{{ product.model_files.url }}" download>–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –º–æ–¥–µ–ª–∏</a>
                    {% else %}
                        <p>–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –µ–≥–æ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏</p>
                        {% if not request.GET.added_product %}
                            <br>
                            <form class="product-form" method="post" action="{% url 'add_user_cart' product.id %}">
                                {% csrf_token %}
                                <button type="submit" class="base-link btn-add-to-cart">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                            </form>

                        {% else %}
                            <br>
                            <a class="base-link auth-link cart-item-link" href="{% url 'user_cart' %}">–ü–µ—Ä–µ–π—Ç–∏ –≤
                                –∫–æ—Ä–∑–∏–Ω—É</a>
                            <br>
                            <form class="product-form" method="post" action="{% url 'add_user_cart' product.id %}">
                                {% csrf_token %}
                                <button type="submit" class="base-link btn-add-to-cart">–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë</button>
                            </form>
                            <br>
                            <p>–ü—Ä–æ–¥—É–∫—Ç —Å ID {{ request.GET.added_product }} –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É.
                                –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: {{ request.GET.quantity }}</p>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        {% else %}
            <p>–ü—Ä–æ–¥—É–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</p>
        {% endif %}
    </div>
{% endblock %}
